<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="vip.xiaonuo.biz.modular.balanceredpacket.mapper.BizBalanceRedPacketMapper">
    <select id="list" resultType="vip.xiaonuo.biz.modular.balanceredpacket.entity.BizBalanceRedPacket">
        select
            a.ID as id,
            a.ACCOUNT_DATE as accountDate,
            a.REASON as reason,
            a.GIVE_TYPE as giveType,
            a.PERSON as person,
            a.ACCOUNT as account,
            a.RELATIVE_ID as relativeId,
            a.USER_ID as userId,
            a.REMARK as remark,
            a.CREATE_TIME as createTime,
            a.CREATE_USER as createUser,
            a.UPDATE_TIME as updateTime,
            a.UPDATE_USER as updateUser
        from biz_balance_red_packet a
        where 1=1
        AND a.DELETE_FLAG = '1000-01-01 00:00:00'
        <if test="entity.startAccountDate != null and entity.startAccountDate !='' and entity.endAccountDate != null and entity.endAccountDate !=''">
        <![CDATA[    AND a.ACCOUNT_DATE BETWEEN #{entity.startAccountDate} AND #{entity.endAccountDate}    ]]>
        </if>
        <if test="entity.reason != null and entity.reason !=''">
        <![CDATA[    AND a.REASON like concat('%', #{entity.reason}, '%')    ]]>
        </if>
        <if test="entity.giveType != null and entity.giveType !=''">
        <![CDATA[    AND a.GIVE_TYPE = #{entity.giveType}    ]]>
        </if>
        <if test="entity.person != null and entity.person !=''">
        <![CDATA[    AND a.PERSON like concat('%', #{entity.person}, '%')    ]]>
        </if>
        <if test="entity.remark != null and entity.remark !=''">
        <![CDATA[    AND a.REMARK like concat('%', #{entity.remark}, '%')    ]]>
        </if>
        <if test="entity.accountYear != null">
            <![CDATA[	AND a.ACCOUNT_DATE between concat(#{entity.accountYear}, '-01-01') AND concat(#{entity.accountYear}, '-12-31')     ]]>
        </if>
        order by a.ACCOUNT_DATE desc
    </select>
</mapper>